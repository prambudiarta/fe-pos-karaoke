import{Q as v}from"./QBtn.d6aa4958.js";import{Q as p}from"./QInput.b0df898b.js";import{Q as x,a as B}from"./QTable.9cab5d86.js";import{Q as O}from"./QPage.0e392090.js";import{S as f}from"./sweetalert2.all.9f9dcfd4.js";import{e as g,Q as E}from"./firebaseConfig.4f4498d5.js";import{Q as A}from"./QCardActions.8db9fe51.js";import{Q as F}from"./QDialog.6f613d3d.js";import{C as I}from"./ClosePopup.48f5ee19.js";import{u as R}from"./device-store.1ef5a44d.js";import{_ as b,ak as U,r as u,c as w,w as y,t as _,v as Q,x as m,f as r,A as V,a8 as N,p as q,o as L,s as M}from"./index.847c9bb9.js";import"./render.6364fbb8.js";import"./QList.57ede4a3.js";import"./QSelect.836893ec.js";import"./use-timeout.602f94f8.js";import"./format.3c3ea85b.js";const P={props:{room:Object,isOpen:Boolean},setup(t,{emit:o}){const{isOpen:i}=U(t),e=u(i.value),n=u({...t.room}),s=w(()=>t.room&&t.room.id),l=R();return y(i,d=>{e.value=d}),y(()=>t.room,d=>{n.value={...d}},{deep:!0}),{dialog:e,localRoom:n,isEditMode:s,saveRoom:async()=>{try{s.value?await l.updateRoom(n.value):await l.saveRoom(n.value),e.value=!1,o("save")}catch(d){console.error("Error saving Room:",d)}}}}},T={class:"text-h6"};function Y(t,o,i,e,n,s){return _(),Q(F,{modelValue:e.dialog,"onUpdate:modelValue":o[3]||(o[3]=l=>e.dialog=l)},{default:m(()=>[r(E,null,{default:m(()=>[r(g,null,{default:m(()=>[V("div",T,N(e.isEditMode?"Edit Room":"Create Room"),1)]),_:1}),r(g,null,{default:m(()=>[r(p,{modelValue:e.localRoom.id,"onUpdate:modelValue":o[0]||(o[0]=l=>e.localRoom.id=l),label:"Device Id"},null,8,["modelValue"]),r(p,{modelValue:e.localRoom.description,"onUpdate:modelValue":o[1]||(o[1]=l=>e.localRoom.description=l),label:"Room"},null,8,["modelValue"]),r(p,{modelValue:e.localRoom.price,"onUpdate:modelValue":o[2]||(o[2]=l=>e.localRoom.price=l),label:"Price per Hour",type:"number"},null,8,["modelValue"])]),_:1}),r(A,{align:"right"},{default:m(()=>[q(r(v,{flat:"",label:"Cancel",color:"primary"},null,512),[[I]]),r(v,{flat:"",label:"Save",color:"primary",onClick:e.saveRoom},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var j=b(P,[["render",Y]]);const H={components:{RoomForm:j},setup(){const t=u(!1),o=R(),i=u([]),e=u(),n=u({}),s=u(""),l=()=>{n.value={},t.value=!0},c=w(()=>s.value?i.value.filter(a=>a.description.toLowerCase().includes(s.value.toLowerCase())):i.value),d=[{name:"id",required:!0,label:"Devices Id",align:"left",field:a=>a.id,sortable:!0},{name:"description",label:"Deskripsi",field:"description",sortable:!0},{name:"price",label:"Harga per Jam",field:"price",sortable:!0},{name:"edit",label:"Action",field:"editAction",align:"center",sortable:!1}],C=async()=>{await o.fetchRoom(),i.value=o.rooms},h=a=>{n.value=a,t.value=!0},D=async a=>{await o.updateRoom(a)},S=async a=>{if(typeof a.id=="undefined"){f.fire("Error","Category ID is undefined.","error");return}f.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async k=>{if(k.isConfirmed)if(typeof a.id=="undefined"){f.fire("Error","Category ID is undefined.","error");return}else await o.deleteRoom(a.id),await o.fetchRoom(),i.value=o.rooms,f.fire("Deleted!","Your item has been deleted.","success")})};return y(()=>{var a;return(a=e.value)==null?void 0:a.dialog},a=>{a===!1&&(t.value=!1)}),L(C),{rooms:i,columns:d,roomForm:e,editableRoom:n,isDialogOpen:t,searchQuery:s,filteredCategory:c,openNewCategoryForm:l,editCategory:h,updateCategory:D,deleteCategory:S,fetchRoom:C}}},J={class:"flex justify-between q-mb-md"};function z(t,o,i,e,n,s){const l=M("room-form");return _(),Q(O,{padding:""},{default:m(()=>[V("div",J,[r(v,{label:"Create Room",color:"primary",onClick:e.openNewCategoryForm,class:"q-mr-md"},null,8,["onClick"]),r(p,{modelValue:e.searchQuery,"onUpdate:modelValue":o[0]||(o[0]=c=>e.searchQuery=c),placeholder:"Search Room"},null,8,["modelValue"])]),r(B,{title:"Room List",rows:e.filteredCategory,columns:e.columns,"row-key":"id"},{"body-cell-edit":m(c=>[r(x,{props:c},{default:m(()=>[r(v,{flat:"",icon:"delete",onClick:d=>e.deleteCategory(c.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),r(l,{ref:"roomForm",category:e.editableRoom,isOpen:e.isDialogOpen,onSave:e.updateCategory},null,8,["category","isOpen","onSave"])]),_:1})}var me=b(H,[["render",z]]);export{me as default};
