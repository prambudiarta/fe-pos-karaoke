import{Q as m}from"./QInput.b0df898b.js";import{Q as f}from"./QBtn.d6aa4958.js";import{a as p,d as g,i as h,Q as w,e as _}from"./firebaseConfig.4f4498d5.js";import{Q as y}from"./QPage.0e392090.js";import{Q as v,a as x}from"./QLayout.1c8dff45.js";import{_ as Q,u as k,r as b,t as P,v as S,x as l,f as s,ae as C,A as V}from"./index.847c9bb9.js";import{g as E,a as U}from"./index-61e5ac61.510e748d.js";import{S as t}from"./sweetalert2.all.9f9dcfd4.js";import{u as L}from"./user-store.1a3d08e6.js";import"./render.6364fbb8.js";import"./QResizeObserver.55b68e59.js";const D={setup(){const i=k(),a=b({email:"",password:""});return{user:a,login:async()=>{try{t.fire({title:"Processing...",text:"Please wait.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}});const e=E(),r=await U(e,a.value.email,a.value.password),n=p(g,"users",r.user.uid),o=await h(n),d=L();if(o.exists()){const u=o.data();d.setUser({id:r.user.uid,email:u.email,role:u.role})}else if(a.value.email==="prambudiarta@gmail.com")d.setUser({id:r.user.uid,email:a.value.email,role:"Manager"});else throw Error("User Sudah Dihapus!");t.close(),i.push("/admin")}catch(e){t.close(),console.error("Error logging in: ",e);let r="Login failed. Please try again.";e.code==="auth/invalid-email"||e.code==="auth/auth/invalid-login-credentials"?r="Username atau password salah.":e.code==="auth/network-request-failed"&&(r="Kesalahan jaringan. Silakan cek koneksi Anda dan coba lagi."),t.fire("Error",r,"error")}}}}},K=V("div",{class:"text-h5 text-center q-mb-md"},"Karaoke PoS System",-1);function q(i,a,c,e,r,n){return P(),S(v,{view:"hHh lpR fFf",class:"bg-login"},{default:l(()=>[s(x,null,{default:l(()=>[s(y,{class:"flex flex-center"},{default:l(()=>[s(w,{class:"login-card",raised:""},{default:l(()=>[s(_,null,{default:l(()=>[K,s(m,{filled:"",modelValue:e.user.email,"onUpdate:modelValue":a[0]||(a[0]=o=>e.user.email=o),label:"Email",type:"email",dense:"",class:"q-mb-md",placeholder:"Enter your email"},null,8,["modelValue"]),s(m,{filled:"",modelValue:e.user.password,"onUpdate:modelValue":a[1]||(a[1]=o=>e.user.password=o),label:"Password",type:"password",dense:"",class:"q-mb-md",placeholder:"Enter your password",onKeyup:C(e.login,["enter"])},null,8,["modelValue","onKeyup"]),s(f,{label:"Login",color:"primary",onClick:e.login,class:"full-width",size:"lg"},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}var W=Q(D,[["render",q]]);export{W as default};
