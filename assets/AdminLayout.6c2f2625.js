import{Q as We,a as ne,R as L}from"./QBtn.d6aa4958.js";import{c as re,h as we,a as Ue,b as me}from"./render.6364fbb8.js";import{c as r,h as E,i as ie,k as R,l as ke,r as _,w as f,m as Me,g as xe,o as _e,n as he,p as T,q as He,_ as Re,u as Fe,s as Ne,t as M,v as x,x as s,f as v,y as S,z as D,A as $e}from"./index.847c9bb9.js";import{Q as Ke}from"./QToolbar.6941b456.js";import{Q as je}from"./QResizeObserver.55b68e59.js";import{u as Ge,a as Xe,b as Ye,c as Je,d as Ze,e as et,Q as V,f as I}from"./use-timeout.602f94f8.js";import{Q as ge,a as oe}from"./QList.57ede4a3.js";import{u as tt,a as at,S as ye}from"./sweetalert2.all.9f9dcfd4.js";import{T as ue}from"./TouchPan.00e3b938.js";import{b as G}from"./format.3c3ea85b.js";import{Q as lt,a as nt}from"./QLayout.1c8dff45.js";import{g as ot,s as ut}from"./index-61e5ac61.510e748d.js";import{u as rt}from"./user-store.1a3d08e6.js";var it=re({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:d}){const h=r(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>E("div",{class:h.value},we(d.default))}}),st=re({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:d,emit:h}){const{proxy:{$q:n}}=xe(),u=ie(ke,R);if(u===R)return console.error("QHeader needs to be child of QLayout"),R;const m=_(parseInt(e.heightHint,10)),b=_(!0),g=r(()=>e.reveal===!0||u.view.value.indexOf("H")>-1||n.platform.is.ios&&u.isContainer.value===!0),P=r(()=>{if(e.modelValue!==!0)return 0;if(g.value===!0)return b.value===!0?m.value:0;const l=m.value-u.scroll.value.position;return l>0?l:0}),O=r(()=>e.modelValue!==!0||g.value===!0&&b.value!==!0),a=r(()=>e.modelValue===!0&&O.value===!0&&e.reveal===!0),W=r(()=>"q-header q-layout__section--marginal "+(g.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(O.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),q=r(()=>{const l=u.rows.value.top,B={};return l[0]==="l"&&u.left.space===!0&&(B[n.lang.rtl===!0?"right":"left"]=`${u.left.size}px`),l[2]==="r"&&u.right.space===!0&&(B[n.lang.rtl===!0?"left":"right"]=`${u.right.size}px`),B});function y(l,B){u.update("header",l,B)}function c(l,B){l.value!==B&&(l.value=B)}function p({height:l}){c(m,l),y("size",l)}function w(l){a.value===!0&&c(b,!0),h("focusin",l)}f(()=>e.modelValue,l=>{y("space",l),c(b,!0),u.animate()}),f(P,l=>{y("offset",l)}),f(()=>e.reveal,l=>{l===!1&&c(b,e.modelValue)}),f(b,l=>{u.animate(),h("reveal",l)}),f(u.scroll,l=>{e.reveal===!0&&c(b,l.direction==="up"||l.position<=e.revealOffset||l.position-l.inflectionPoint<100)});const i={};return u.instances.header=i,e.modelValue===!0&&y("size",m.value),y("space",e.modelValue),y("offset",P.value),Me(()=>{u.instances.header===i&&(u.instances.header=void 0,y("size",0),y("offset",0),y("space",!1))}),()=>{const l=Ue(d.default,[]);return e.elevated===!0&&l.push(E("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push(E(je,{debounce:0,onResize:p})),E("header",{class:W.value,style:q.value,onFocusin:w},l)}}});const be=150;var dt=re({name:"QDrawer",inheritAttrs:!1,props:{...Ge,...tt,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Xe,"onLayout","miniState"],setup(e,{slots:d,emit:h,attrs:n}){const u=xe(),{proxy:{$q:m}}=u,b=at(e,m),{preventBodyScroll:g}=et(),{registerTimeout:P,removeTimeout:O}=Ye(),a=ie(ke,R);if(a===R)return console.error("QDrawer needs to be child of QLayout"),R;let W,q=null,y;const c=_(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),p=r(()=>e.mini===!0&&c.value!==!0),w=r(()=>p.value===!0?e.miniWidth:e.width),i=_(e.showIfAbove===!0&&c.value===!1?!0:e.modelValue===!0),l=r(()=>e.persistent!==!0&&(c.value===!0||qe.value===!0));function B(t,o){if(Ce(),t!==!1&&a.animate(),C(0),c.value===!0){const k=a.instances[K.value];k!==void 0&&k.belowBreakpoint===!0&&k.hide(!1),z(1),a.isContainer.value!==!0&&g(!0)}else z(0),t!==!1&&te(!1);P(()=>{t!==!1&&te(!0),o!==!0&&h("show",t)},be)}function se(t,o){Be(),t!==!1&&a.animate(),z(0),C(U.value*w.value),ae(),o!==!0?P(()=>{h("hide",t)},be):O()}const{show:X,hide:F}=Je({showing:i,hideOnRouteChange:l,handleShow:B,handleHide:se}),{addToHistory:Ce,removeFromHistory:Be}=Ze(i,F,l),$={belowBreakpoint:c,hide:F},Q=r(()=>e.side==="right"),U=r(()=>(m.lang.rtl===!0?-1:1)*(Q.value===!0?1:-1)),de=_(0),H=_(!1),Y=_(!1),ce=_(w.value*U.value),K=r(()=>Q.value===!0?"left":"right"),J=r(()=>i.value===!0&&c.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:w.value:0),Z=r(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(Q.value?"R":"L")>-1||m.platform.is.ios===!0&&a.isContainer.value===!0),N=r(()=>e.overlay===!1&&i.value===!0&&c.value===!1),qe=r(()=>e.overlay===!0&&i.value===!0&&c.value===!1),Se=r(()=>"fullscreen q-drawer__backdrop"+(i.value===!1&&H.value===!1?" hidden":"")),Te=r(()=>({backgroundColor:`rgba(0,0,0,${de.value*.4})`})),fe=r(()=>Q.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Oe=r(()=>Q.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Qe=r(()=>{const t={};return a.header.space===!0&&fe.value===!1&&(Z.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Oe.value===!1&&(Z.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),Le=r(()=>{const t={width:`${w.value}px`,transform:`translateX(${ce.value}px)`};return c.value===!0?t:Object.assign(t,Qe.value)}),De=r(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Ve=r(()=>`q-drawer q-drawer--${e.side}`+(Y.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(b.value===!0?" q-drawer--dark q-dark":"")+(H.value===!0?" no-transition":i.value===!0?"":" q-layout--prevent-focus")+(c.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${p.value===!0?"mini":"standard"}`+(Z.value===!0||N.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(fe.value===!0?" q-drawer--top-padding":""))),pe=r(()=>{const t=m.lang.rtl===!0?e.side:K.value;return[[ue,Ee,void 0,{[t]:!0,mouse:!0}]]}),ze=r(()=>{const t=m.lang.rtl===!0?K.value:e.side;return[[ue,ve,void 0,{[t]:!0,mouse:!0}]]}),Ae=r(()=>{const t=m.lang.rtl===!0?K.value:e.side;return[[ue,ve,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function ee(){Pe(c,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}f(c,t=>{t===!0?(W=i.value,i.value===!0&&F(!1)):e.overlay===!1&&e.behavior!=="mobile"&&W!==!1&&(i.value===!0?(C(0),z(0),ae()):X(!1))}),f(()=>e.side,(t,o)=>{a.instances[o]===$&&(a.instances[o]=void 0,a[o].space=!1,a[o].offset=0),a.instances[t]=$,a[t].size=w.value,a[t].space=N.value,a[t].offset=J.value}),f(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&ee()}),f(()=>e.behavior+e.breakpoint,ee),f(a.isContainer,t=>{i.value===!0&&g(t!==!0),t===!0&&ee()}),f(a.scrollbarWidth,()=>{C(i.value===!0?0:void 0)}),f(J,t=>{A("offset",t)}),f(N,t=>{h("onLayout",t),A("space",t)}),f(Q,()=>{C()}),f(w,t=>{C(),le(e.miniToOverlay,t)}),f(()=>e.miniToOverlay,t=>{le(t,w.value)}),f(()=>m.lang.rtl,()=>{C()}),f(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ie(),a.animate())}),f(p,t=>{h("miniState",t)});function C(t){t===void 0?he(()=>{t=i.value===!0?0:w.value,C(U.value*t)}):(a.isContainer.value===!0&&Q.value===!0&&(c.value===!0||Math.abs(t)===w.value)&&(t+=U.value*a.scrollbarWidth.value),ce.value=t)}function z(t){de.value=t}function te(t){const o=t===!0?"remove":a.isContainer.value!==!0?"add":"";o!==""&&document.body.classList[o]("q-body--drawer-toggle")}function Ie(){q!==null&&clearTimeout(q),u.proxy&&u.proxy.$el&&u.proxy.$el.classList.add("q-drawer--mini-animate"),Y.value=!0,q=setTimeout(()=>{q=null,Y.value=!1,u&&u.proxy&&u.proxy.$el&&u.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Ee(t){if(i.value!==!1)return;const o=w.value,k=G(t.distance.x,0,o);if(t.isFinal===!0){k>=Math.min(75,o)===!0?X():(a.animate(),z(0),C(U.value*o)),H.value=!1;return}C((m.lang.rtl===!0?Q.value!==!0:Q.value)?Math.max(o-k,0):Math.min(0,k-o)),z(G(k/o,0,1)),t.isFirst===!0&&(H.value=!0)}function ve(t){if(i.value!==!0)return;const o=w.value,k=t.direction===e.side,j=(m.lang.rtl===!0?k!==!0:k)?G(t.distance.x,0,o):0;if(t.isFinal===!0){Math.abs(j)<Math.min(75,o)===!0?(a.animate(),z(1),C(0)):F(),H.value=!1;return}C(U.value*j),z(G(1-j/o,0,1)),t.isFirst===!0&&(H.value=!0)}function ae(){g(!1),te(!0)}function A(t,o){a.update(e.side,t,o)}function Pe(t,o){t.value!==o&&(t.value=o)}function le(t,o){A("size",t===!0?e.miniWidth:o)}return a.instances[e.side]=$,le(e.miniToOverlay,w.value),A("space",N.value),A("offset",J.value),e.showIfAbove===!0&&e.modelValue!==!0&&i.value===!0&&e["onUpdate:modelValue"]!==void 0&&h("update:modelValue",!0),_e(()=>{h("onLayout",N.value),h("miniState",p.value),W=e.showIfAbove===!0;const t=()=>{(i.value===!0?B:se)(!1,!0)};if(a.totalWidth.value!==0){he(t);return}y=f(a.totalWidth,()=>{y(),y=void 0,i.value===!1&&e.showIfAbove===!0&&c.value===!1?X(!1):t()})}),Me(()=>{y!==void 0&&y(),q!==null&&(clearTimeout(q),q=null),i.value===!0&&ae(),a.instances[e.side]===$&&(a.instances[e.side]=void 0,A("size",0),A("offset",0),A("space",!1))}),()=>{const t=[];c.value===!0&&(e.noSwipeOpen===!1&&t.push(T(E("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),pe.value)),t.push(me("div",{ref:"backdrop",class:Se.value,style:Te.value,"aria-hidden":"true",onClick:F},void 0,"backdrop",e.noSwipeBackdrop!==!0&&i.value===!0,()=>Ae.value)));const o=p.value===!0&&d.mini!==void 0,k=[E("div",{...n,key:""+o,class:[De.value,n.class]},o===!0?d.mini():we(d.default))];return e.elevated===!0&&i.value===!0&&k.push(E("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(me("aside",{ref:"content",class:Ve.value,style:Le.value},k,"contentclose",e.noSwipeClose!==!0&&c.value===!0,()=>ze.value)),E("div",{class:"q-drawer-container"},t)}}});function ct(){return ie(He)}const ft={setup(){const e=_(!1),d=_(!1),h=_(!1),n=_(!1),u=_(!1),m=_(!1),b=Fe(),g=ct(),P=r(()=>g.version),O=rt();return _e(()=>{O.currentUser.role==="Kasir"?m.value=!0:(O.currentUser.role==="Manager"||O.currentUser.role==="super-admin")&&(u.value=!0)}),{drawer:e,itemMenuExpanded:d,deviceMenuExpanded:h,billMenuExpanded:n,toggleLeftDrawer:()=>{e.value=!e.value},toggleItemMenu:()=>{d.value=!d.value},toggleDeviceMenu:()=>{h.value=!h.value},toggleBillMenu:()=>{n.value=!n.value},selectMenu:i=>{b.push({name:i})},userManagement:()=>{b.push({name:"showUser"})},logOut:async()=>{if((await ye.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin keluar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Keluar",cancelButtonText:"Batal"})).isConfirmed)try{const l=ot();await ut(l),O.clearUser(),b.push({name:"login"})}catch(l){console.error("Error logging out:",l),ye.fire("Error","Terjadi kesalahan saat keluar.","error")}},quasarVersion:P,isManager:u,isCommunity:m}}},vt=$e("div",null,"Powered By Galih @ 2024",-1);function mt(e,d,h,n,u,m){const b=Ne("router-view");return M(),x(lt,{view:"hHh lpR fFf"},{default:s(()=>[v(st,{elevated:""},{default:s(()=>[v(Ke,null,{default:s(()=>[v(We,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:n.toggleLeftDrawer},null,8,["onClick"]),v(it,null,{default:s(()=>[S(" Dashboard ")]),_:1}),vt]),_:1})]),_:1}),v(dt,{"show-if-above":"",modelValue:n.drawer,"onUpdate:modelValue":d[5]||(d[5]=g=>n.drawer=g),side:"left",bordered:""},{default:s(()=>[T((M(),x(V,{clickable:"",onClick:d[0]||(d[0]=g=>n.selectMenu("orderShow"))},{default:s(()=>[v(I,null,{default:s(()=>[S(" Order ")]),_:1})]),_:1})),[[L]]),n.isCommunity?D("",!0):(M(),x(ge,{key:0},{default:s(()=>[T((M(),x(V,{clickable:"",onClick:n.toggleItemMenu},{default:s(()=>[v(I,null,{default:s(()=>[S("Menu")]),_:1}),v(I,{side:""},{default:s(()=>[v(ne,{name:n.itemMenuExpanded?"expand_less":"expand_more"},null,8,["name"])]),_:1})]),_:1},8,["onClick"])),[[L]]),n.itemMenuExpanded?(M(),x(oe,{key:0})):D("",!0),n.itemMenuExpanded?T((M(),x(V,{key:1,clickable:"",onClick:d[1]||(d[1]=g=>n.selectMenu("categoryShow"))},{default:s(()=>[S("Manage Categories")]),_:1})),[[L]]):D("",!0),n.itemMenuExpanded?T((M(),x(V,{key:2,clickable:"",onClick:d[2]||(d[2]=g=>n.selectMenu("ItemShow"))},{default:s(()=>[S("Manage Item")]),_:1})),[[L]]):D("",!0)]),_:1})),n.isCommunity?D("",!0):(M(),x(ge,{key:1},{default:s(()=>[T((M(),x(V,{clickable:"",onClick:n.toggleDeviceMenu},{default:s(()=>[v(I,null,{default:s(()=>[S("Devices")]),_:1}),v(I,{side:""},{default:s(()=>[v(ne,{name:n.deviceMenuExpanded?"expand_less":"expand_more"},null,8,["name"])]),_:1})]),_:1},8,["onClick"])),[[L]]),n.deviceMenuExpanded?(M(),x(oe,{key:0})):D("",!0),n.deviceMenuExpanded?T((M(),x(V,{key:1,clickable:"",onClick:d[3]||(d[3]=g=>n.selectMenu("roomShow"))},{default:s(()=>[S("Manage Room")]),_:1})),[[L]]):D("",!0),n.deviceMenuExpanded?T((M(),x(V,{key:2,clickable:"",onClick:d[4]||(d[4]=g=>n.selectMenu("printerShow"))},{default:s(()=>[S("Manage Printer")]),_:1})),[[L]]):D("",!0)]),_:1})),n.isManager?T((M(),x(V,{key:2,clickable:"",onClick:n.userManagement},{default:s(()=>[v(I,null,{default:s(()=>[S(" Cek User ")]),_:1})]),_:1},8,["onClick"])),[[L]]):D("",!0),v(oe),T((M(),x(V,{clickable:"",onClick:n.logOut},{default:s(()=>[v(I,null,{default:s(()=>[v(ne,{name:"logout"})]),_:1}),v(I,null,{default:s(()=>[S(" LOGOUT ")]),_:1})]),_:1},8,["onClick"])),[[L]])]),_:1},8,["modelValue"]),v(nt,null,{default:s(()=>[v(b)]),_:1})]),_:1})}var Ot=Re(ft,[["render",mt]]);export{Ot as default};
