import{W as l}from"./index.5079f055.js";import{k as w,s as p,l as u,m as U,g as m,c as r,d as s,n as d,o as f,a as n,b as h}from"./firebaseConfig.3e9e2ba4.js";async function g(e){const t=w(p,`images/${e.name}`);return await u(t,e),U(t)}const x=l("itemStore",{state:()=>({items:[],categories:[]}),getters:{},actions:{async fetchItems(){const e=await m(r(s,"items"));this.items=e.docs.map(t=>{const a=t.data();return{id:t.id,name:a.name,price:a.price,category:a.category,imageUrl:a.imageUrl}})},async saveItem(e,t){let a="";t&&(a=await g(t));const i=await d(r(s,"items"),{...e,imageUrl:a});this.items.push({id:i.id,...e,imageUrl:a})},async deleteItem(e){await f(n(s,"items",e)),this.items=this.items.filter(t=>t.id!==e)},async updateItem(e,t){if(!e.id)throw new Error("Item must have an ID for updating");let a="";t&&(a=await g(t));const i=n(s,"items",e.id),o={name:e.name,price:e.price,category:e.category,imageUrl:a===""?e.imageUrl:a};await h(i,o);const c=this.items.findIndex(y=>y.id===e.id);c!==-1&&(this.items[c]=e)},async fetchCategories(){const e=await m(r(s,"categories"));this.categories=e.docs.map(t=>{const a=t.data();return{id:t.id,category:a.category}})},async saveCategory(e,t){let a="";t&&(a=await g(t));const i=await d(r(s,"categories"),{...e,imageUrl:a});this.categories.push({id:i.id,...e})},async deleteCategoriy(e){await f(n(s,"categories",e)),this.categories=this.categories.filter(t=>t.id!==e)},async updateCategory(e,t){if(!e.id)throw new Error("Category must have an ID for updating");const a=n(s,"categories",e.id),i={category:e.category};await h(a,i);const o=this.categories.findIndex(c=>c.id===e.id);o!==-1&&(this.categories[o]=e)}}});export{x as u};
