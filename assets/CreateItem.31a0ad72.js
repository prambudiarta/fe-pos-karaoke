import{Q as $,e as E}from"./firebaseConfig.4f4498d5.js";import{u as ee,a as te,b as le,c as ae,d as ne,e as ie,f as re,g as W,Q as K}from"./QInput.b0df898b.js";import{Q as ue,a as oe}from"./QSelect.836893ec.js";import{r as C,c as f,g as X,G as se,J as Y,N as ce,h,ac as me,K as de,_ as fe,t as ve,v as ge,x as I,f as y,A as G}from"./index.847c9bb9.js";import{c as pe}from"./render.6364fbb8.js";import{h as be}from"./format.3c3ea85b.js";import{Q as L}from"./QBtn.d6aa4958.js";import{Q as ye}from"./QForm.33e461dc.js";import{Q as Fe}from"./QPage.0e392090.js";import{u as he}from"./item-store.9485e393.js";import{S as M}from"./sweetalert2.all.9f9dcfd4.js";import"./use-timeout.602f94f8.js";import"./QDialog.6f613d3d.js";function x(e,i,g,o){const u=[];return e.forEach(c=>{o(c)===!0?u.push(c):i.push({failedPropValidation:g,file:c})}),u}function A(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Y(e)}const Se={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xe=["rejected"];function Ce({editable:e,dnd:i,getFileInput:g,addFilesToQueue:o}){const{props:u,emit:c,proxy:r}=X(),S=C(null),z=f(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),N=f(()=>parseInt(u.maxFiles,10)),Q=f(()=>parseInt(u.maxTotalSize,10));function k(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&se(t);else{const p=g();p&&p!==t.target&&p.click(t)}}function P(t){e.value&&t&&o(null,t)}function q(t,p,V,_){let a=Array.from(p||t.target.files);const v=[],F=()=>{v.length!==0&&c("rejected",v)};if(u.accept!==void 0&&z.value.indexOf("*/")===-1&&(a=x(a,v,"accept",n=>z.value.some(m=>n.type.toUpperCase().startsWith(m)||n.name.toUpperCase().endsWith(m))),a.length===0))return F();if(u.maxFileSize!==void 0){const n=parseInt(u.maxFileSize,10);if(a=x(a,v,"max-file-size",m=>m.size<=n),a.length===0)return F()}if(u.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(n=>{n.__key=n.webkitRelativePath+n.lastModified+n.name+n.size}),_===!0){const n=V.map(m=>m.__key);a=x(a,v,"duplicate",m=>n.includes(m.__key)===!1)}if(a.length===0)return F();if(u.maxTotalSize!==void 0){let n=_===!0?V.reduce((m,R)=>m+R.size,0):0;if(a=x(a,v,"max-total-size",m=>(n+=m.size,n<=Q.value)),a.length===0)return F()}if(typeof u.filter=="function"){const n=u.filter(a);a=x(a,v,"filter",m=>n.includes(m))}if(u.maxFiles!==void 0){let n=_===!0?V.length:0;if(a=x(a,v,"max-files",()=>(n++,n<=N.value)),a.length===0)return F()}if(F(),a.length!==0)return a}function w(t){A(t),i.value!==!0&&(i.value=!0)}function s(t){Y(t),(t.relatedTarget!==null||ce.is.safari!==!0?t.relatedTarget!==S.value:document.elementsFromPoint(t.clientX,t.clientY).includes(S.value)===!1)===!0&&(i.value=!1)}function D(t){A(t);const p=t.dataTransfer.files;p.length!==0&&o(null,p),i.value=!1}function O(t){if(i.value===!0)return h("div",{ref:S,class:`q-${t}__dnd absolute-full`,onDragenter:A,onDragover:A,onDragleave:s,onDrop:D})}return Object.assign(r,{pickFiles:k,addFiles:P}),{pickFiles:k,addFiles:P,onDragover:w,onDragleave:s,processFiles:q,getDndNode:O,maxFilesNumber:N,maxTotalSizeNumber:Q}}var Ve=pe({name:"QFile",inheritAttrs:!1,props:{...ee,...te,...Se,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...le,...xe],setup(e,{slots:i,emit:g,attrs:o}){const{proxy:u}=X(),c=ae(),r=C(null),S=C(!1),z=ne(e),{pickFiles:N,onDragover:Q,onDragleave:k,processFiles:P,getDndNode:q}=Ce({editable:c.editable,dnd:S,getFileInput:U,addFilesToQueue:B}),w=ie(e),s=f(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),D=f(()=>W(s.value)),O=f(()=>s.value.map(l=>l.name).join(", ")),t=f(()=>be(s.value.reduce((l,d)=>l+d.size,0))),p=f(()=>({totalSize:t.value,filesNumber:s.value.length,maxFiles:e.maxFiles})),V=f(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:z.value,...o,id:c.targetUid.value,disabled:c.editable.value!==!0})),_=f(()=>"q-file q-field--auto-height"+(S.value===!0?" q-file--dnd":"")),a=f(()=>e.multiple===!0&&e.append===!0);function v(l){const d=s.value.slice();d.splice(l,1),n(d)}function F(l){const d=s.value.indexOf(l);d>-1&&v(d)}function n(l){g("update:modelValue",e.multiple===!0?l:l[0])}function m(l){l.keyCode===13&&de(l)}function R(l){(l.keyCode===13||l.keyCode===32)&&N(l)}function U(){return r.value}function B(l,d){const b=P(l,d,s.value,a.value),T=U();T!=null&&(T.value=""),b!==void 0&&((e.multiple===!0?e.modelValue&&b.every(Z=>s.value.includes(Z)):e.modelValue===b[0])||n(a.value===!0?s.value.concat(b):b))}function j(){return[h("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function J(){if(i.file!==void 0)return s.value.length===0?j():s.value.map((d,b)=>i.file({index:b,file:d,ref:this}));if(i.selected!==void 0)return s.value.length===0?j():i.selected({files:s.value,ref:this});if(e.useChips===!0)return s.value.length===0?j():s.value.map((d,b)=>h(ue,{key:"file-"+b,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{v(b)}},()=>h("span",{class:"ellipsis",textContent:d.name})));const l=e.displayValue!==void 0?e.displayValue:O.value;return l.length!==0?[h("div",{class:e.inputClass,style:e.inputStyle,textContent:l})]:j()}function H(){const l={ref:r,...V.value,...w.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:B};return e.multiple===!0&&(l.multiple=!0),h("input",l)}return Object.assign(c,{fieldClass:_,emitValue:n,hasValue:D,inputRef:r,innerValue:s,floatingLabel:f(()=>D.value===!0||W(e.displayValue)),computedCounter:f(()=>{if(e.counterLabel!==void 0)return e.counterLabel(p.value);const l=e.maxFiles;return`${s.value.length}${l!==void 0?" / "+l:""} (${t.value})`}),getControlChild:()=>q("file"),getControl:()=>{const l={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(l,{onDragover:Q,onDragleave:k,onKeydown:m,onKeyup:R}),h("div",l,[H()].concat(J()))}}),Object.assign(u,{removeAtIndex:v,removeFile:F,getNativeElement:()=>r.value}),me(u,"nativeEl",()=>r.value),re(c)}});const _e={setup(){const e=C({name:"",price:0,category:""}),i=he(),g=C(null),o=C(["Drinks","Snacks","Main Course","Desserts"]),u=async()=>{console.log(g.value);try{await i.saveItem(e.value,g.value),M.fire({icon:"success",title:"Success",text:"Item added successfully!"}),c()}catch{M.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:'<a href="">What went wrong?</a>'})}},c=()=>{e.value={name:"",price:0,category:""},g.value=null};return{item:e,imageFile:g,categories:o,onSubmit:u,onReset:c}}},Ie=G("div",{class:"text-h6"},"Create New Item",-1);function ze(e,i,g,o,u,c){return ve(),ge(Fe,{padding:""},{default:I(()=>[y(ye,{onSubmit:o.onSubmit,onReset:o.onReset,class:"q-gutter-md"},{default:I(()=>[y($,null,{default:I(()=>[y(E,null,{default:I(()=>[Ie]),_:1}),y(E,null,{default:I(()=>[y(K,{filled:"",modelValue:o.item.name,"onUpdate:modelValue":i[0]||(i[0]=r=>o.item.name=r),label:"Item Name",rules:[r=>!!r||"Item name is required"]},null,8,["modelValue","rules"]),y(K,{type:"number",filled:"",modelValue:o.item.price,"onUpdate:modelValue":i[1]||(i[1]=r=>o.item.price=r),label:"Price",rules:[r=>r>0||"Price must be greater than 0"]},null,8,["modelValue","rules"]),y(oe,{filled:"",modelValue:o.item.category,"onUpdate:modelValue":i[2]||(i[2]=r=>o.item.category=r),options:o.categories,label:"Category",rules:[r=>!!r||"Category is required"]},null,8,["modelValue","options","rules"]),y(Ve,{filled:"",modelValue:o.imageFile,"onUpdate:modelValue":i[3]||(i[3]=r=>o.imageFile=r),label:"Upload Item Image",accept:"image/*"},null,8,["modelValue"]),G("div",null,[y(L,{label:"Submit",type:"submit",color:"primary"}),y(L,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-md"})])]),_:1})]),_:1})]),_:1},8,["onSubmit","onReset"])]),_:1})}var Be=fe(_e,[["render",ze]]);export{Be as default};
