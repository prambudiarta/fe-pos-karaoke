import{Q as m}from"./QBtn.d6aa4958.js";import{Q as g}from"./QInput.b0df898b.js";import{Q as S,a as B}from"./QTable.9cab5d86.js";import{Q as O}from"./QPage.0e392090.js";import{S as f}from"./sweetalert2.all.9f9dcfd4.js";import{e as _,Q as E}from"./firebaseConfig.4f4498d5.js";import{Q as N}from"./QCardActions.8db9fe51.js";import{Q as F}from"./QDialog.6f613d3d.js";import{C as q}from"./ClosePopup.48f5ee19.js";import{u as w}from"./live-data.668527f6.js";import{_ as C,ak as A,r as u,c as b,w as v,t as y,v as Q,x as c,f as n,A as k,a8 as U,p as I,o as M,s as T}from"./index.847c9bb9.js";import"./render.6364fbb8.js";import"./QList.57ede4a3.js";import"./QSelect.836893ec.js";import"./use-timeout.602f94f8.js";import"./format.3c3ea85b.js";import"./axios.6e1fcf85.js";import"./firebaseDateFormatter.19ab7f63.js";const Y={props:{lapangan:Object,isOpen:Boolean},setup(o,{emit:e}){const{isOpen:i}=A(o),a=u(i.value),r=u({...o.lapangan}),s=b(()=>o.lapangan&&o.lapangan.id),t=w();return v(i,d=>{a.value=d}),v(()=>o.lapangan,d=>{r.value={...d}},{deep:!0}),{dialog:a,localLapangan:r,isEditMode:s,saveLapangan:async()=>{try{s.value?await t.updateLapangan(r.value):await t.saveLapangan(r.value),a.value=!1}catch(d){console.error("Error saving lapangan:",d)}e("save")}}}},j={class:"text-h6"};function P(o,e,i,a,r,s){return y(),Q(F,{modelValue:a.dialog,"onUpdate:modelValue":e[2]||(e[2]=t=>a.dialog=t)},{default:c(()=>[n(E,null,{default:c(()=>[n(_,null,{default:c(()=>[k("div",j,U(a.isEditMode?"Edit Lapangan":"Create Lapangan"),1)]),_:1}),n(_,null,{default:c(()=>[n(g,{modelValue:a.localLapangan.nama,"onUpdate:modelValue":e[0]||(e[0]=t=>a.localLapangan.nama=t),label:"Nama"},null,8,["modelValue"]),n(g,{modelValue:a.localLapangan.deskripsi,"onUpdate:modelValue":e[1]||(e[1]=t=>a.localLapangan.deskripsi=t),label:"Deskripsi"},null,8,["modelValue"])]),_:1}),n(N,{align:"right"},{default:c(()=>[I(n(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[q]]),n(m,{flat:"",label:"Save",color:"primary",onClick:a.saveLapangan},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var R=C(Y,[["render",P]]);const z={components:{LapanganForm:R},setup(){const o=u(!1),e=w(),i=u([]),a=u(),r=u({}),s=u(""),t=()=>{r.value={},o.value=!0},p=b(()=>s.value?(console.log(s.value),i.value.filter(l=>l.nama.toLowerCase().includes(s.value.toLowerCase()))):i.value),d=[{name:"nama",required:!0,label:"Nama",align:"left",field:"nama",sortable:!0},{name:"deskripsi",required:!0,label:"Deskripsi",align:"left",field:"deskripsi",sortable:!0},{name:"actions",label:"Actions",field:"action",align:"center",sortable:!1}],L=async()=>{await e.fetchLapangan(),i.value=e.lapangan},h=async l=>{if(typeof l.id=="undefined"){f.fire("Error","Lapangan ID is undefined.","error");return}f.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async x=>{if(x.isConfirmed)if(typeof l.id=="undefined"){f.fire("Error","Lapangan ID is undefined.","error");return}else await e.deleteLapangan(l.id),f.fire("Deleted!","Your item has been deleted.","success"),await L()})},V=l=>{r.value=l,o.value=!0},D=async l=>{await e.updateLapangan(l)};return v(()=>{var l;return(l=a.value)==null?void 0:l.dialog},l=>{l===!1&&(o.value=!1)}),M(L),{lapangan:i,columns:d,lapanganForm:a,editableLapangan:r,isDialogOpen:o,searchQuery:s,filteredLapangan:p,openNewLapanganForm:t,deleteLapangan:h,editLapangan:V,updateLapangan:D}}},G={class:"flex justify-between q-mb-md"};function H(o,e,i,a,r,s){const t=T("lapangan-form");return y(),Q(O,{padding:""},{default:c(()=>[k("div",G,[n(m,{label:"Create Lapangan",color:"primary",onClick:a.openNewLapanganForm,class:"q-mr-md"},null,8,["onClick"]),n(g,{modelValue:a.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=p=>a.searchQuery=p),placeholder:"Search lapangan by nama"},null,8,["modelValue"])]),n(B,{title:"Lapangan List",rows:a.filteredLapangan,columns:a.columns,"row-key":"id"},{"body-cell-actions":c(p=>[n(S,{props:p},{default:c(()=>[n(m,{flat:"",icon:"edit",onClick:d=>a.editLapangan(p.row)},null,8,["onClick"]),n(m,{flat:"",icon:"delete",onClick:d=>a.deleteLapangan(p.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),n(t,{ref:"lapanganForm",lapangan:a.editableLapangan,isOpen:a.isDialogOpen,onSave:a.updateLapangan},null,8,["lapangan","isOpen","onSave"])]),_:1})}var ua=C(z,[["render",H]]);export{ua as default};
